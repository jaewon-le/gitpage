# chapter4 프로그래밍 응용

## topic1 프로그래밍 언어로 작성된 프로그램을 컴퓨터는 어떻게 이해할까요?

### 컴파일 과정(Compile)

- 컴파일은 소스 코드를 오브젝트 코드로 변환시키는 과정입니다. 여기서 소스 코드는 여러분이 c언어와 같은 프로그래밍 언어로 작성한 코드이고, 오브젝트 코드는 기계 코드라고도 알려져 있는데, 0과 1로 이루어져 이씅며 컴퓨터에게 프로그램이 어떻게 실행되어야 하는지 알려주는 코드입니다. make 명령어 자체는 컴파일러가 아니고, clang이라는 컴파일러를 호출해서 c 소스 코드를 오브젝트 코드로 컴파일 하도록 합니다.

### 전처리(Precompile)

- 컴파일의 전체 과정은 네 단계로 나누어볼 수 있습니다. 그 중 첫 번쨰 단계는 전처리인데, 전처리기에 의해 수행됩니다. #으로 시작되는 c 소스 코드는 전처리기에는 실질적인 컴파일이 이루어지기 전에 무언가를 실행하라고 알려줍니다.

### 컴파일(compile)

- 전처리기가 전처리한 소스 코드를 생성하고 나면 그 다음 단계는 컴파일입니다. 컴파이럴라고 불리는 프로그램은 c 코드를 어셈블리어라는 저수준 프로그래밍 언어로 컴파일합니다.

### 어셈블(Assemble)

- 소스 코드가 어셈블리 코드로 변환되면, 다음 단계인 어셈블 단계로 어셈블링 코드를 오브젝트 코드로 변환시키는 것입니다. 컴퓨터의 중앙처리장치가 프로그램을 어떻게 수행해야 하는지 알 수 있는 명령어 형태인 연속된 0과 1들로 바꿔주는 작업이죠, 이 변환작업은 어셈블러라는 프로그램이 수행합니다. 소스 코드에서 오브젝트 코드로 컴파일 되어야 할 파일이 딱 한 개라면, 컴파일 작업은 여기서 끝이 납니다. 그러나 그렇지 않은 경우에는 링크라 불리는 단계가 추가됩니다.

### 링크(Link)

- 만약 프로그램이(math.h나 cs50.h와 같은 라이브러리를 포함해)여러 개의 파일로 이루어져 있어 하나의 오브젝트 파일로 합쳐져야 한다면 링크라는 컴파일의 마지막 단계가 필요합니다. 링커는 여러 개의 다른 오브젝트 코드 파일을 실행 가능한 하나의 오브젝트 코드파일로 합쳐줍니다. 예를 들어, 컴파일을 하는 동안에 cs50 라이브러리를 링크하면 오브젝트 코드는 Getlnt()나 GetString() 같은 함수를 어떻게 실행할 지 알 수 있게 됩니다.

## topic2 프로그램 속 작은 오류를 어떻게 찾을 수 있을까요?

### 버그와 디버깅

- 버그(bug)는 코드에 들어있는 오류입니다. 버그로 인해 프로그램의 실행에 실패하거나 프로그래머가 원하는 대로 동작하지 않게 됩니다. 버그를 만들고 싶지 않겠지만 모든 프로그래머들은 버그와 마주하게 되어있습니다. 디버깅(debugging)은 코드에 있는 버그를 식별하고 고치는 과정입니다. 프로그래머는 디버거라고 불리는 프로그램을 사용하여 디버깅을 하게 됩니다.

### 디버깅의 기본

- 프로그램은 일반적으로 인간보다 훨씬 빠르게 연산을 수행합니다. 그래서 프로그램을 실행시켜보는 것만으로는 무엇이 잘못됐는지 찾아내기 어렵습니다. 디버거는 프로그램을 특정 행에서 멈출 수 있게 해주기 때문에 버그를 찾는데 도움이 됩니다. 프로그래머는 멈춰진 그 지점에서 무슨 일이 일어나는지 볼 수 있습니다. 프로그램이 멈추는 특정 지점을 중지점이라고 합니다. 또한 프로그래머가 프로그램을 한번에 한 행씩 실행할 수 있게 해줍니다. 이로서 프로그램이 내리는 모든 결정들을 단계졀로 따라갈 수 있게 됩니다.

### GDB사용해보기

- GDB는 자주 쓰이는 디버거 중 하나입니다. c프로그램에 GDB을 실행시키려면, 먼저 프로그램을 컴파일해야 합니다. 그런 다음, 보통때처럼 "./프로그램*이름,"Gdb 프로그램*이름"을 칩니다.

```
 Command         Result
1.  b         add breakpoint
2.  r          runs program
3. info b    shows breakpoints
4. clear [#] removes breakpoint
5.  n        step forward one block
6.  s        step forwoard one line
7.  p [var]  print variable value
8. info locals print local variable values
9.  bt       show function calls
10. q             quit GDB
11. c          continue program

```

- 중지점을 설정하기 위해서는 프로그램을 멈추고 싶은 행 번호 다음에 'b'를 치고(breakpoint를 의미) 엔터 키를 누릅니다. 이렇게 하면 여러분 프로그램에 중지점이 설정될 겁니다. 현재의 모든 중지점을 보고 싶다면 "info b"를 치면 모든 중지점의 위치를 보여줄 것입니다. 중지점의 행 번호 다음에 "clear"를 치면 중지점을 제거할 수 있습니다.

- 중지점을 설정했다면 'r'(rund의 의미)로 프로그램을 실행합니다. 여러분들의 프로그램이 명령어 인자를 받는다면, 'r' 다음에 인자들을 쓰세요. 프로그램이 실행될 것이고, 중지점에서 자동으로 멈출 겁니다. 중지점마다 프롬프트가 나타날 것입니다. 이 때 몇 가지 옵션들이 있습니다.

- 현재 지점에서 프로그램의 변수값을 보고 싶다면 변수 이름 다음에 'p'를 입력합니다(print). "info locals" 명령어는 현재 모든 지역 변수값을 보여줄 것입니다.

- 코드의 다음 행으로 나아가고 싶다면 'n'을 입력합니다(next).'s'(step)를 쳐도 코드의 다음 행으로 가기는 하지만, 함수 내부로 들어가서 함수 내부의 각 행을 흝는 것입니다.

- 프로그램을 계속 실행하고 싶다면 'c'를 입력합니다(continue.)중지점이 없다면 프로그램은 종료할 것입니다. 중지점이 있다면, GDB는 다음 중지점에서 멈출 겁니다.

## topic3 10을 4로 나누면 어떤 값이 나올까요?

### 형변환

- c에는 int형, float형, char형을 포함한 여러 개의 자료형이 있습니다. 가끔 변수를 한 자료형에서 다른 자료형으로 변환시켜줘야 할 때가 있는데, c는 형변환(Typecasting)을 통해 이것을 해결합니다. 형변환할 때 정밀도(표현 범위)가 더 높은 자료형으로 바꿀 경우 값에 오차가 발생할 수 있다는 점을 유의해야 합니다.

### char형과 int형 사의 형변환

- ASCII 표준은 각 문자에 그 문자를 식별할 수 있는 고유 숫자를 부여했습니다. 대문자 A는 65, 대문자 B는 66과 같이 숫자가 할당되어 있습니다. 그래서 형변환을 쓰면 char형과 int형을 서로 변환할 수 있습니다.

## topic4 자주 사용되는 기능을 다시 사용하는 방법이 있을까요?

### 함수

- 함수는 특정 목적을 위해 만들어진 재사용 가능한 코드입니다. 함수는 입력값과 출력값을 가지며 프로그램 내의 어디에서든 재사용될 수 있습니다. 프로그램을 여러 개의 함수로 만들면 코드를 조직화하고 간단하게 만들 수 있습니다. 이것이 추상화의 한 예입니다. 함수를 한번 작성하면 그 함수가 구체적으로 어떻게 만들어졌는지 몰라도 함수를 사용할 수 있습니다. 그리고 함수를 만들지 않은 사람도 저수준의 상세 내용을 신경 쓰지 않고 함수를 사용(호출)할 수 있습니다.

### 범위(Scope)

- 함수 안에서 변수를 정의하거나 함수의 매개변수로 전달된 것들은 그 함수 안(지역)에서만 유효합니다. 이러한 변수들을 지역변수라고 부릅니다.
  지역변수는 그 함수 안에서만 사용될 수 있고, 다른 곳에서는 존재하지 않습니다.

## topic5 연속된 데이터를 효율적으로 처리하는 방법에는 무엇이 있을까요?

### 배열과 문자열

- 변수는 값을 저장하기 위해 쓰인다는 것을 기억하시나요? 100명의 시험 점수나 1000명의 주소와 같이 여러 값들을 저장하기 위해 여러 개의 변수를 써야 하는 상황이 발생할 수 있습니다. 이러한 경우에 사용할 수 있도록 c에서는 배열이라는 자료 구조를 제공합니다. 배열은 같은 자료형으로 된 여러 개의 변수를 연속적으로 저장합니다.예를 들어 정수 배열은 여러 개의 정수 값을 연속적으로 저장하고 문자배열(문자열)은 문자 값을 연속적으로 저장합니다.

### 배열

- 변수와 마찬가지로, 배열을 선언할 때는 첫째로 배열에 저장되는 자료의 유형을 명시합니다. 그리고 배열의 이름을 지정합니다. 이름 뒤에 오는 대괄호 안에는 배열의 크기가 들어갑니다. 배열의 크기는 배열에 얼마나 많은 값을 넣어둘 수 있는지를 정의합니다.

## topic6 커맨드 라인에서 프로그램에 필요한 데이터를 전달할 수 있을까요?

### 커맨드라인

- 프로그램을 명령줄(Command-line)에서 실행시킬 때, 보통 ./프로그램\_이름 같은 명령어로 실행했을 것입니다. C에서는 프로그램의 명령행 인자(command-line arguments)들을 명시할 수 있고, 명령줄에 인자들을 명시하여 사용자가 프로그램의 main 함수에 인자들을 전해줄 수 있게 합니다. 이 기능은 GetString처럼 프로그램이 실행 중일 때 입력값을 전달받는 방법 대신 사용할 수 있습니다.

### argc, argv

- 여러분이 써보았을 법한 make,cd,clang,mkdir와 같은 명령어 프로그램들은 모두 명령행 인자들을 받습니다. c에서 명령행 인자들은 main 함수에 입력값으로 전답됩니다. 하지만 우리가 이전에 작성했던 main 함수에서는 void를 써주었기 때문에 아무런 인자도 받지 않았습니다.

- 명령행 인자를 받기 위해서는,main 함수가 정수형인 argc와 문자열 배열인 argv라는 두 인자를 받아야 합니다. argc는 argument count의 약자로, 명령줄에 전달도니느 인자의 수를 나타냅니다. 공백으로 구분도니느 각 단어는 하나의 인자로 인식되고, ./hello와 같이 프로그램을 호출하는 것도 하나의 인자로 인식됩니다. argv는 argument vector의 약자로, 인자들 그 자체를 나타내는 배열입니다. 배열의 각 값은 문자열입니다.

## topic7 return 0은 어떤 의미를 가지고 있을까요?

### 종료 코드

- main 함수가 정의된 것을 보면 정수를 반환한다는 것을 알 수 있었을 것입니다. 하지만 우리는 지금까지 main 함수의 끝에서 어떤 값도 반환해주지 않았습니다. main 함수 안에서 아무 것도 반환하지 않으면 기보넞ㄱ으로 컴파일러는 자동으로 main 함수가 0을 반환한다고 추정합니다.
  main 함수가 반환하는 값은 종료 코드라고 불립니다. 프로그램이 길어지고 더 복잡해질수록, 종료 코드가 더 값지게 쓰일 수 있습니다.

### 종료코드 사용하기

- 관례적으로, 프로그램이 문제없이 성공적으로 끝나면 종료 코드 0을 반환해야 합니다. 그래서 main 함수 끝에 반환이 명시되지 않으면 컴파일러는 프로그램이 돌려주었다고 추정합니다. 0이 아닌 종료 코드(보통 1이나 -1)는 일반적으로 프로그램이 실행되는 동안 프로그램이 성공적으로 끝나지 못하게 하는 어떤 오류가 있었다는 것을 의미합니다.

- 입력 유효성(input validation) 과정에서 종료 코드가 흔히 쓰이는데, 입력 유효성이란, 사용자가 제공한 입력값이 유효한지 프로글매이 확인하는 것입니다.예를 들어 프로그램이 두 개의 명령행 인자를 받는 것으로 알고 있는데, 한 개만 받았다면, 0이 아닌 종료 코드를 반환해 오류를 알립니다.

### 종료 코드 확인하기

- 보통 명령줄로 프로그램을 실행시키면, main 함수가 반환하는 반환 값을 볼 수 없습니다. 그러나 프로그래머들이 코드에서 어떤 문제가 있는지 찾을 수 있도록 도와주는 프로그램인 디버깅 도구를 사용하면 main 함수가 어떤 종료 코드로 종료됐는지 볼 수 있습니다.

- 종료 코드를 확인하는 것은 프로그램이 왜 실패했는지 알아낼 수 있는 좋은 방법입니다. 각 오류에 따라 다른 종료 코드가 반환되기 떄문에 입력 유효성을많이 확인해야 하는 프로그램을 작성할 때 큰 도움이 됩니다.

## topic8 누군가 미리 구현해둔 함수들을 사용한다면 편하지 않을까요?

### 라이브러리

- 라이브러리는 프로그래머들이 이미 만들어진 코드를 다시 개발하지 않아도 되게 하고 서로 함께 작업할 수 있도록 만들어주는 함수의 모음입니다. 라이브러리는 문자를 대문자에서 소문자로 변환하거나, 문자열을 정수로 변환하는 것 등 c에서 자주 쓰이는 연산들의 함수를 포합합니다. 여러분의 프로그램에서 비슷한 기능을 수행해야 한다며느 이미 만들어져 있는 함수를 또 만든 대신 이미 존재하는 라이브러리를 그대로 사용할 수 있습니다.

### 라이브러리 사용하기

- 라이브러리를 불러오기 위해서는 #include를 사용해 해당 라이브러리의 헤더 파일을 포함해주면 됩니다. 라이브러리를 불러오면 라이브러리 함수들을 사용할 수 있습니다. 왼쪽의 코드와 같이 작성하면 stdio.h 라이브러리에 속한 함수(printf, scanf 등)들과 math.h라이브러리에 속한 함수(cos, sin 등)를 사용할 수 있습니다.

### c에서 자주 쓰이는 라이브러리 함수

- ctype.h: 문자 분류 함수, 문자열 처리시 문자의 유형에 따라 구분해서 처리해야 하는 경우에 사용하는 함수 라이브러리입니다.

```
isalnum(): 문자형 인자 하나를 입력값으로 받아, 문자가 영어 알파벳이나 숫자이면 참을, 그렇지 않으면 거짓을 반환

isalpha(): 문자형 인자 하나를 입력값으로 받아, 문자가 영어 알파벳이면 참을, 그렇지 않으면 거짓을 반환

islower(): 문자형 인자 하나를 입력값으로 받아, 문자가 알파벳 소문자이면 참을, 그렇지 않으면 거짓을 반환

isupper(): 문자형 인자 하나를 입력값으로 받아, 문자가 알파벳 대문자이면 참을, 그렇지 않으면 거짓을 반환

tolower(): 문자형 인자 하나를 입력값으로 받아, 문자가 알파벳 소문자로 변환될 수 있으면 소문자로 변환된 문자를 반환하고,그렇지않으면 원래의 문자를 반환

toupper(): 문자형 인자 하나를 입력값으로 받아, 문자가 알파벳 대문자로 변활될 수 있으면 대문자로 변환된 문자를 반환하고, 그렇지 않으면 원래의 문자를 반환
```

- math.h: 수학 관련 함수, 대부분의 수학 관련 함수는 double형의 인자를 갖고, double형의 값을 리턴합니다.

```
ceil(): double형 인자 하나를 입력값으로 받아, 그값보다 작지 않은 가장 작은 정수값을 double형으로 반환합니다.

cos(), sin(),tan(): 각각 double형 인자 하나를 입력값으로 받아, 그 값의 코사인,사인,탄젠트한 값을 반환

floor(): double형 인자 하나를 입력값으로 받아, 그 값보다 크지 않은 가장 큰 정수값을 double형으로 반환

pow(): double형 인자 두 개를 입력값으로 받아, 첫 번쨰 입력값을 두 번쨰 값만큼 제곱한 값을 반환

lround(): double형 인자 하나를 입력값으로 받아, 반올림된 수를 long int형으로 반환

log(),log10(),log2(): double형 인자 하나를 입ㄹ력값으로 받아 그 수의 로그 값을 반환(각각 밑 e, 밑 10, 밑2)
```

- stdlib.h: 데이터 변환 함수, 데이터변환 함수는 데이터 간의 형태 변환이 필요할 때 사용됩니다.

```
aroi(): 문자열 인자 하나늘 입력값으로 받아, 가능하다면 그 문자열을 정수로 변환하여 정수를 반환

rand(): 의사 난수인 정수를 반환(보통,srand()를 먼저 사용)
```

- string.h: 문자열 처리함수, 하나 혹은 두 개의 문자열을 입력 받아 문자열의 값을 처리합니다.

```
strlen(): 문자열 인자 하나를 입력값으로 받아,널 종단을 제외한 문자열의길이를 반환

strcmp(): 문자열 인자 두 개를 입력값으로 받아, 두 값이 같으면 0을, 첫 번째 문자열이 두 번째 문자열 앞에 오면 음수 값을, 뒤에 오면 양수 값을 반환

strstr(): 문자열인자 두 개를 입력값으로 받아, 첫 번째 문자열에 두 번째 문자열링 나오는지 탐색(여러 개가 있더라도, 처음 것만 찾습니다.)
```

위애소 설명한 라이브러리와 다른 라이브러리에는 더 많은 함수가 있습니다. 이미 만들어져 있는 c라이브러리를 살펴보고 어떤 함수를 쓸 수 있는지 보는 것이 좋습니다. 이렇게 하면 코드를 다시 만들지 않고 라이브러리에서 가져다 쓸 수 있습니다.

## topic9 다양한 속성들을 가지는 나만의 자료형을 만들 수 있다면 유용하지 않을까요?

### 구조체와 캡슐화

- 프로그래밍을 할 때, 일반적인 자료형들을 사용하기에 적합하지 않을 수 있습니다. 이런 상황에서 우리는 데이터를 캡슐화하여 어떤 개체에 연관된느 정보들을 한 덩어리로 묶을 수 있게 됩니다. 예를 들어 학생은 이름(string), 나이(int형),평점(float형)와 같은 정보들을 갖고 있는데, 이 정보들은단독으로 큰 의미를 갖고 있지 않습니다. 이 정보들이 모여 학생이라는 개체를 이룰 때 의미를 갖게 되고 c에서는 구조체(structure)라는 방법을 사용합니다.

### 배열과 구조체

- 데이터를묶어 효율적으로 ㅎ할용하기 위하여 배열을 사용하였습니다. 배열의 장점은 각 학생의 인덱스를 알 때, 모든 학생들에게 임의 접근할 수 있으며, 각 배열 원소를 순환하면서 확인할 수 있다는 것입니다. 하지만 배열은 같은 테이터형의 변수들을 하나로 묶을 수 있지마느 서로 다른 데이터형의 변수를 묶어서 사용할 수 없습니다. 그리고 사용 전에 배열의 크리를 선언해야만 합니다.

## topic10 반복문을 사용하지 않고, 반복해서 처리하는 기능을 구현할 수 있을까요?

### 재귀

- 함수를 사용할 때 어디에서 호출했나요? main 안에서 프로그램을 작성하면서 필요한 순간에 호출하여 사용합니다. 그런데 main 역시 함수라는걸 기억하시나요? main이라는 함수 안에서 또 다른 함수를 사용한 것입니다. 이 사실을 알게 되었을 때, 우리는 함수가 본인 스스로를 호출해서 사용할 수 있는지에 대해 의문을 가질 수 있습니다. 이에 대한 대답은 할 수 있다 이며,이러한 것을 재귀(Recursion)라고 부릅니다.

### 재귀의 사용

- 시그마라는 것을 아시나요? 시그마는 주어진 수 n 부터 1까지의 연속된수를 모두 합한 값입니다.

### 스택

- 재귀 함수에서 동일한함수를 계속해서 호출될 때마다 함수를 위한 메모리가 계속해서 할당됩니다. 함수가 호출될 때 마다 사용되는 메모리를 스택이라고 부릅니다. 컴퓨터가 일을 처리하는데 관리를 하는 역할인 운영체제는 함수를 실행할 수 있도록 일정량의 바이트를 주고, 그 공간에 함수의 변수난 다른 것들을 저장할 수 있도록 합니다. 그래서 재귀함수를 이용하다 보면 함수가 종료되지 않고,함수가 계속해서 호출되는 경우가 발생하기도 합니다. 이 경우 스택 공간은 초과되고 프로그램 충돌이 발생됩니다. 그렇기 때문에 재귀를 사용할 때는 과도하게 스택 메모리가 사용되지 않도록 주의해야 합니다. 메모리 사용 문제 때문에 재귀는 매우 유의 해야 하지마느 특정 자료구조를 다룰 때 매우 유용하게 사용됩니다.

## topic11 만약 1000명의 데이터를 입력받으려면 scanf를 1000번 반복해야할까요?

### 파일 입출력

- 프로그램은 한 번 실행하고 나면 그 안에 입력했던 데이터들이 모두 사라집니다. 프로그램이 변수를 만들고 그 안에 데이터를 넣어두거나 할 때 사용하는 메모리는 영구적으로 데이터를 저장할 수 있는 작업공간이 아니기 때문입니다. 데이터를 영구적으로 저장해두고 싶다면 프로그램이 실행될 때 파일에 저장해두면 됩니다. 이 파일에 저장된 데이터는 다음 번에 프로그램이실행될 떄 다시 읽어올 수 있습니다. c에는파일 입출력(File IO)기능이있어서 파일에 데이터를 저장하거나 읽어오도록 만들 수 있습니다.

### 파일 열기 쓰기

- 파일을 열고 나면 파일의 내용을 읽거나 쓸 수 있습니다.

- 파일의 내용 중에서 한 글자만 읽어오고 싶다면 fgetc 함수를 사용할 수 있고, 정해진길이만큼의 데이터를 읽어오고 싶다면 fread함수를 사용할 수 있습니다.형식문자열을 사용하여 데이터를 읽어오기 위해서는 fscanf를 이용합니다.

- 파일에 데이터를 한 글자만 쓰고 싶다면 fputc 함수를 사용하고 한 줄을 쓰고 싶다면 fputs 함수를 사용할 수 있습니다. fprintf 함수를 사용하면 printf 함수처럼 형식문자열을 이용해 데이터를 쓸 수 있습니다. fwrite 함수는 배열에 들어있는 데이터를 파일에 쓸 수 있도록 합니다.
